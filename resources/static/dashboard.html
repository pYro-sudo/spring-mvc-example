<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="EN">
<head>
    <title>Teacher Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>
<h1>Welcome, <span th:text="${username}">User</span></h1>

<div th:each="teacher : ${teachers}">
    <span th:text="${teacher.name}"></span>
</div>

<button onclick="fetchTeachers()">Refresh via API</button>

<script>
    function fetchTeachers() {
        axios.get('/api/teacher', {
            headers: {
                'Authorization': 'Bearer ' + getCookie('JWT')
            }
        })
            .then(response => {
                console.log(response.data);
                alert('Data fetched via API');
            });
    }

    function getCookie(name) {
        const value = `; ${document.cookie}`;
        const parts = value.split(`; ${name}=`);
        if (parts.length === 2) return parts.pop().split(';').shift();
    }
</script>
</body>
</html>